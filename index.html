<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="yeet" content="yeet">
    <title>yeet</title>
    <style>
      html {
        background-color: #000;
      }
      body {
        display: flex;
        margin: 0 auto;
        width: 100vw;
        height: 100vh;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
      h1 {
        color: #fff;
        font-family: Impact, "Arial Black", sans-serif;
        font-size: 20vw;
        margin: 0;
        visibility: hidden;
      }
    </style>
  </head>
  <body>
    <!-- yeet -->
    <h1>YEET</h1>
    <audio autoplay controls>
      <source src="yeet.wav" type="audio/wav">
    </audio>
    <script>
      const yeetStartTime = 461
      const yeetEndTime = 1055
      let yeetTimeout = null
      let noYeetTimeout = null

      const audio = document.getElementsByTagName('audio')[0]
      const yeetElement = document.getElementsByTagName('h1')[0]

      const yeet = timeTillYeetEnd => {
        yeetElement.style.visibility = 'visible'
        noYeetTimeout = setTimeout(noYeet, timeTillYeetEnd)
      }

      const queueYeet = event => {
        const yeetTime = event.target.currentTime * 1000
        if (yeetTime < yeetStartTime) {
          const timeTillYeetStart = yeetStartTime - event.target.currentTime
          yeetTimeout = setTimeout(() => yeet(yeetEndTime), timeTillYeetStart)
        } else if (yeetTime < yeetEndTime) {
          const timeTillYeetEnd = yeetEndTime - event.target.currentTime
          yeet(timeTillYeetEnd)
        }
      }

      const noYeet = () => {
        if (yeetTimeout) { clearTimeout(yeetTimeout) }
        if (noYeetTimeout) { clearTimeout(noYeetTimeout) }
        yeetElement.style.visibility = 'hidden'
      }

      audio.addEventListener('play', queueYeet, false)
      audio.addEventListener('pause', noYeet, false)




      console.log('yeet')
    </script>
  </body>
</html>
